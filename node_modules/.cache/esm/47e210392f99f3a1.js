let fs,chalk,stringSimilarity;_2f9‍.x([["commaSeparatedList",()=>commaSeparatedList],["readFiles",()=>readFiles],["compareJSON",()=>compareJSON]]);_2f9‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_2f9‍.w("chalk",[["default",["chalk"],function(v){chalk=v}]]);_2f9‍.w("string-similarity",[["default",["stringSimilarity"],function(v){stringSimilarity=v}]]);



const commaSeparatedList = (value) => {
    _2f9‍.g.console.log(value)
    return value.split(',');
}

const readFiles = (firstFilePath, secondFilePath) => {
    
    const firstFile = fs.readFileSync(firstFilePath, 'utf-8');
    const secondFile = fs.readFileSync(secondFilePath, 'utf-8');

    if (!firstFile || !secondFile) {
        console.log("error reading file!")
        process.exit(1)
    }

    return { firstFile, secondFile }
}

const JSONtoObj = (jsonFile) => {
    return JSON.stringify(JSON.parse(jsonFile))
}


const compareJSON = (firstFilePath, secondFilePath) => {

    const { firstFile, secondFile } = readFiles(firstFilePath, secondFilePath);
    const firstJSON = JSONtoObj(firstFile)
    const secondJSON = JSONtoObj(secondFile)

    const coef = stringSimilarity.compareTwoStrings(firstJSON, secondJSON)
    printResult(coef)
    process.exit(0)
}

const printResult = (result) => {
    const percentage = (result * 100).toFixed(1)
    _2f9‍.g.console.log(chalk.blue(`JSON objects are ${chalk.green(percentage)}% similar, or ${chalk.green(result.toFixed(1))}`))
}





